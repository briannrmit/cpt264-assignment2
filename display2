
#!/bin/bash
# This script fulfills the requirements for scripting part B, part 2 of the
# second assignment of CPT264

userid="$(whoami)"

while getopts ":abcde" opt; do
  case $opt in
    a)
      NCORE="$(grep -c ^processor /proc/cpuinfo)"
      echo Number of CPU cores on the system is ${NCORE};;
    b)
      #get PID of current script
      processpid="$(pgrep display2)"
      niceness="$(ps -o ni $processpid | head -n 2 | tail -n 1)"
      echo The priority of the the current process is ${niceness};;
    c)
      nprocesses="$(ps -u $userid | wc -l)"
      echo The number of processes being run by current user is ${nprocesses};;
    d)
      #gets number of open file descriptors by current user
      nofd="$(lsof | grep $userid | wc -l)"
      echo The number of open file descriptors by current user is ${nofd};;
    e)
      maxnumperprocess="$(ulimit -n)"
      echo The max number of open files per process for this system is $maxnumperprocess;;
  esac
done
